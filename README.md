# 招华AI助手微信小程序

## 项目概述

招华AI助手是一个基于微信小程序平台的智能工具集，旨在为用户提供多种产业和企业相关的智能分析服务。本项目整合了多个AI驱动的工具，包括项目匹配、载体推荐、迁址评估和产业链分析，通过对话式交互方式，为用户提供便捷、高效的信息查询和决策支持服务。

## 功能特点

### 智能工具集

- **找项目助手**: 基于用户需求智能匹配适合的招商项目，提供项目详情和联系方式。
- **找载体助手**: 帮助用户查找合适的产业园区、厂房、办公空间等载体资源。
- **迁址动力评估**: 分析企业迁址的可行性和动力，提供量化评估报告。
- **产业链分析**: 提供产业上下游关系分析，帮助了解产业生态和发展趋势。

### 用户体验优化

- **统一对话界面**: 所有工具采用一致的对话式交互界面，降低用户学习成本。
- **个性化工具头像**: 每个工具配备独特的头像设计，提升识别度和品牌形象。
- **会话持久化**: 支持对话历史和结果的本地存储，用户可随时关闭后继续之前的对话。
- **长程请求支持**: 优化长时间运行的AI请求处理，支持高达3分钟的处理时间。
- **文本复制功能**: 支持长按消息文本复制到剪贴板，方便用户保存重要信息。
- **键盘优化**: 智能处理键盘弹出/收起，改善移动端输入体验。
- **最近使用记录**: 自动记录用户使用过的工具，在首页展示最近使用的工具，方便快速访问。

## 环境要求

- 微信开发者工具 1.06.2306120 或更高版本
- 基础库最低版本 2.30.0
- Node.js 16.x 或更高版本

## 快速开始

1. 克隆项目
   ```bash
   git clone [项目仓库地址]
   cd zhaohuAI_tools
   ```

2. 使用微信开发者工具打开项目
   - 导入项目目录
   - 填入自己的 AppID（或选择无 AppID 模式）

3. 配置环境
   - 配置 Coze API 密钥（如有需要）
   - 云开发环境配置（如使用云开发功能）

4. 本地开发
   - 编译运行项目
   - 在模拟器或真机预览效果

## 技术实现

### 核心组件

- **通用聊天组件 (chat-page)**:
  - 统一的对话界面实现
  - 支持自定义头像、欢迎语和输入提示
  - 消息历史管理及存储
  - 键盘行为优化
  - 工具使用记录功能

- **结果展示组件**:
  - 针对各工具定制的结果展示页面
  - 数据持久化支持
  - 优化的视觉呈现

### 技术特点

- **组件化设计**: 高度组件化的架构，提高代码复用性和可维护性
- **数据持久化**: 使用微信存储API实现对话及结果数据的持久化
- **API集成**: 集成Coze API实现AI对话能力
- **响应式布局**: 适配不同屏幕尺寸和安全区域
- **状态管理**: 有效管理请求状态和UI状态，提升用户体验
- **本地存储**: 使用本地存储记录工具使用历史，提供快速访问

## 使用方法

1. 从主页选择需要使用的AI工具
2. 在对话框中描述您的需求
3. AI助手将通过对话形式提供相关信息和建议
4. 对于有结构化数据的响应，可查看详细结果页面
5. 长按文本可复制内容，点击页面任意区域可收起键盘
6. 通过首页的最近使用记录可快速访问常用工具

## 目录结构

项目采用优化后的文件结构组织：

```
zhaohuAI_tools/
├── src/                     # 源码目录
│   ├── components/          # 组件目录
│   │   ├── common/          # 通用组件
│   │   └── business/        # 业务组件
│   ├── pages/               # 页面目录
│   │   ├── index/           # 首页
│   │   ├── findProject/     # 找项目相关页面
│   │   ├── findVenue/       # 找载体相关页面
│   │   ├── relocEval/       # 迁址评估相关页面
│   │   ├── industryAnalysis/# 产业链分析相关页面
│   │   ├── profile/         # 用户个人中心
│   │   ├── favorites/       # 收藏夹页面
│   │   └── history/         # 历史记录页面
│   ├── services/            # API 服务层
│   ├── utils/               # 工具函数
│   │   ├── request.js       # 网络请求工具
│   │   ├── storage.js       # 本地存储工具
│   │   └── validator.js     # 数据验证工具
│   ├── constants/           # 常量定义
│   ├── types/               # TypeScript 类型定义（如使用TS）
│   ├── assets/              # 静态资源目录
│   │   ├── icons/           # 图标资源
│   │   │   └── tools/       # 工具头像
│   │   └── styles/          # 全局样式文件
│   ├── app.js               # 小程序入口文件
│   ├── app.json             # 小程序全局配置
│   ├── app.wxss             # 小程序全局样式
│   └── sitemap.json         # 小程序搜索配置
├── config/                  # 配置文件目录
├── docs/                    # 文档目录
│   ├── file_structure_migration_guide.md # 文件结构迁移指南
│   ├── new_file_structure.md            # 新文件结构说明
│   └── reference_path_updates.md        # 引用路径更新说明
├── tests/                   # 测试文件目录
├── cloudfunctions/          # 云函数目录
├── project.config.json      # 项目配置文件
└── project.private.config.json # 项目私有配置文件
```

## 项目维护

### 代码提交规范

遵循 Angular 提交规范，格式如下：
```
<type>(<scope>): <subject>

<body>

<footer>
```

常用的 type 类型:
- feat: 新功能
- fix: 修复bug
- docs: 文档更新
- style: 代码风格调整
- refactor: 代码重构
- perf: 性能优化
- test: 测试相关
- chore: 构建过程或辅助工具变动

### 分支管理策略

- master: 主分支，稳定版本
- develop: 开发分支，最新开发版本
- feature/xxx: 功能分支，用于开发新功能
- hotfix/xxx: 热修复分支，用于修复线上bug

### 发布流程

1. 功能开发完成后，合并到 develop 分支
2. 测试通过后，合并到 master 分支
3. 在 master 分支上打 tag，生成新的版本号
4. 将代码部署到生产环境

## 文件组织原则

1. **关注点分离**: 将业务逻辑、UI展示、数据处理分开
2. **单一职责**: 每个文件只负责一个功能
3. **高内聚低耦合**: 相关功能放在一起，减少不同模块间的依赖
4. **可测试性**: 代码设计应易于编写单元测试
5. **一致性**: 遵循统一的代码风格和命名规范

## 引用路径规范

为了保持代码的一致性，使用以下引用路径格式：

```javascript
// 推荐
const request = require('../../utils/request');
const { TOOL_IDS } = require('../../constants/index');

// 不推荐
const request = require('./../../../../utils/request');
```

## 常见问题

### 开发中常见问题及解决方案

- **Q: 小程序启动时报错 "xxx is not defined"**
  A: 检查 app.js 中是否正确引入了相关模块，或者检查模块是否正确导出

- **Q: 页面跳转后数据丢失**
  A: 使用本地存储（wx.setStorage）或页面参数传递数据

- **Q: API 请求超时**
  A: 检查网络连接，增加超时时间，或添加重试机制

- **Q: 资源路径错误**
  A: 确保所有资源路径使用正确的前缀，静态资源应使用 `/src/assets/` 开头的路径

### 错误码说明

- 1001: 网络请求失败
- 1002: 用户未授权
- 1003: 数据解析错误
- 1004: 操作超时

## 更新日志

### v1.0.0 (2023-03-20)
- 初始版本发布
- 实现智能对话助手基本功能
- 支持找项目、找载体、迁址评估和产业链分析四大功能模块

### v1.1.0 (2023-03-21)
- 最近使用记录功能：实现用户与智能工具交互时自动记录使用情况
- 添加用户使用记录自动保存功能
- 优化聊天界面响应速度

### v1.2.0 (2023-03-28)
- 项目结构优化：将所有代码和资源文件整合到src目录
- 重构文件引用路径，提高代码组织性和可维护性
- 文档更新：添加详细的文件结构说明和引用路径规范

## 联系方式

- 项目维护者: [维护者姓名]
- 邮箱: [维护者邮箱]
- 问题反馈: [问题反馈链接] 